plugins {
    id 'java'
    id 'groovy'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation platform("org.apache.groovy:groovy-bom:$groovyVersion")

    implementation 'org.apache.groovy:groovy'
}

tasks.register('runScript', JavaExec) {
    dependsOn 'classes'

    if (!project.hasProperty("mainClass")) {
        throw new IllegalArgumentException("You need to specify the main class using -PmainClass=... command-line property")
    }

    println "> Running ${project.getProperty("mainClass")}.groovy script..."

    main = project.getProperty("mainClass")
    classpath = sourceSets.main.runtimeClasspath
}

tasks.register('runJavaExample', JavaExec) {
    dependsOn 'classes'
    main = 'example.Main'
    classpath = sourceSets.main.runtimeClasspath
}